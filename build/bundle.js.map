{"version":3,"names":[],"mappings":"","sources":["bundle.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Program = void 0;\nvar Input_1 = require(\"./gameplay/Input\");\nvar Mat4_1 = require(\"./mathLib/Mat4\");\nvar Util_1 = require(\"./mathLib/Util\");\nvar Camera_1 = require(\"./renderer/Camera\");\nvar Mesh_1 = require(\"./renderer/Mesh\");\nvar Renderer_1 = require(\"./renderer/Renderer\");\nvar ShaderSources_1 = require(\"./ShaderSources\");\nvar alphabets = [\n    \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\"\n];\nvar Program = (function () {\n    function Program() {\n        this._then = 0;\n        this._cubeRotation = 0;\n        this._frameTimes = [];\n        this._frameCursor = 0;\n        this._numFrames = 0;\n        this._maxFrames = 60;\n        this._totalFPS = 0;\n        this._fps = 0;\n    }\n    Program.prototype.init = function () {\n        var gl = Renderer_1.Renderer.instance.gl;\n        var a = Input_1.Input.instance.onKey(Input_1.Keycode.W, this.onKeyDown.bind(this));\n        a.disconnect();\n        this._textCanvas = document.getElementById(\"textCanvas\");\n        this._textContext = this._textCanvas.getContext(\"2d\");\n        this._buffers = {};\n        this._shaders = {};\n        this._shaders.phong = Renderer_1.Renderer.instance.loadShader(\"phong\", ShaderSources_1.vsPhongSource, ShaderSources_1.fsPhongSource);\n        this._shaders.quad = Renderer_1.Renderer.instance.loadShader(\"quad\", ShaderSources_1.vsFrameBufferSource, ShaderSources_1.fsFrameBufferSource);\n        this._cubeMesh = new Mesh_1.Mesh([\n            { vertices: [-0.5, -0.5, 0.5, 1], normals: [0, 0, 1], texCoords: [0, 0] },\n            { vertices: [0.5, -0.5, 0.5, 1], normals: [0, 0, 1], texCoords: [1, 0] },\n            { vertices: [0.5, 0.5, 0.5, 1], normals: [0, 0, 1], texCoords: [1, 1] },\n            { vertices: [-0.5, 0.5, 0.5, 1], normals: [0, 0, 1], texCoords: [0, 1] },\n            { vertices: [-0.5, -0.5, -0.5, 1], normals: [0, 0, -1], texCoords: [0, 0] },\n            { vertices: [0.5, -0.5, -0.5, 1], normals: [0, 0, -1], texCoords: [1, 0] },\n            { vertices: [0.5, 0.5, -0.5, 1], normals: [0, 0, -1], texCoords: [1, 1] },\n            { vertices: [-0.5, 0.5, -0.5, 1], normals: [0, 0, -1], texCoords: [0, 1] },\n            { vertices: [-0.5, 0.5, -0.5, 1], normals: [0, -1, 0], texCoords: [0, 0] },\n            { vertices: [0.5, 0.5, -0.5, 1], normals: [0, -1, 0], texCoords: [1, 0] },\n            { vertices: [0.5, 0.5, 0.5, 1], normals: [0, -1, 0], texCoords: [1, 1] },\n            { vertices: [-0.5, 0.5, 0.5, 1], normals: [0, -1, 0], texCoords: [0, 1] },\n            { vertices: [-0.5, -0.5, -0.5, 1], normals: [0, 1, 0], texCoords: [0, 0] },\n            { vertices: [0.5, -0.5, -0.5, 1], normals: [0, 1, 0], texCoords: [1, 0] },\n            { vertices: [0.5, -0.5, 0.5, 1], normals: [0, 1, 0], texCoords: [1, 1] },\n            { vertices: [-0.5, -0.5, 0.5, 1], normals: [0, 1, 0], texCoords: [0, 1] },\n            { vertices: [0.5, -0.5, -0.5, 1], normals: [1, 0, 0], texCoords: [0, 0] },\n            { vertices: [0.5, 0.5, -0.5, 1], normals: [1, 0, 0], texCoords: [1, 0] },\n            { vertices: [0.5, 0.5, 0.5, 1], normals: [1, 0, 0], texCoords: [1, 1] },\n            { vertices: [0.5, -0.5, 0.5, 1], normals: [1, 0, 0], texCoords: [0, 1] },\n            { vertices: [-0.5, -0.5, -0.5, 1], normals: [-1, 0, 0], texCoords: [0, 0] },\n            { vertices: [-0.5, 0.5, -0.5, 1], normals: [-1, 0, 0], texCoords: [1, 0] },\n            { vertices: [-0.5, 0.5, 0.5, 1], normals: [-1, 0, 0], texCoords: [1, 1] },\n            { vertices: [-0.5, -0.5, 0.5, 1], normals: [-1, 0, 0], texCoords: [0, 1] }\n        ], [\n            0, 1, 2, 0, 2, 3,\n            4, 5, 6, 4, 6, 7,\n            8, 9, 10, 8, 10, 11,\n            12, 13, 14, 12, 14, 15,\n            16, 17, 18, 16, 18, 19,\n            20, 21, 22, 20, 22, 23\n        ]);\n        this.createQuadbuffer();\n        var canvas = Renderer_1.Renderer.instance.canvas;\n        this.createFramebuffer(canvas.width, canvas.height);\n        window.addEventListener('resize', this.onCanvasResize.bind(this), false);\n        this.onCanvasResize();\n        this._texture = this.loadTexture(\"./working/tile000.png\");\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        gl.enable(gl.BLEND);\n        gl.enable(gl.DEPTH_TEST);\n    };\n    Program.prototype.onKeyDown = function () {\n        console.log(\"keydown\");\n    };\n    Program.prototype.onCanvasResize = function () {\n        var gl = Renderer_1.Renderer.instance.gl;\n        var canvas = Renderer_1.Renderer.instance.canvas;\n        canvas.height = window.innerHeight;\n        canvas.width = window.innerWidth;\n        this.createFramebuffer(gl.canvas.width, gl.canvas.height);\n    };\n    Program.prototype.processInput = function (dt) {\n        var editorCamera = Renderer_1.Renderer.instance.editorCamera;\n        if (Input_1.Input.instance.isKeyDown(Input_1.Keycode.W))\n            editorCamera.processKeyboard(Camera_1.CameraMovement.FORWARD, dt);\n        if (Input_1.Input.instance.isKeyDown(Input_1.Keycode.S))\n            editorCamera.processKeyboard(Camera_1.CameraMovement.BACKWARD, dt);\n        if (Input_1.Input.instance.isKeyDown(Input_1.Keycode.A))\n            editorCamera.processKeyboard(Camera_1.CameraMovement.LEFT, dt);\n        if (Input_1.Input.instance.isKeyDown(Input_1.Keycode.D))\n            editorCamera.processKeyboard(Camera_1.CameraMovement.RIGHT, dt);\n    };\n    Program.prototype.update = function () {\n        this._then = Date.now();\n        requestAnimationFrame(this.updateFrame.bind(this));\n    };\n    Program.prototype.updateFrame = function (now) {\n        var gl = Renderer_1.Renderer.instance.gl;\n        this._elapsed = now - this._then;\n        if (this._elapsed == 0) {\n            this._fps = 0;\n        }\n        else {\n            this._fps = 1000 / this._elapsed;\n        }\n        this._then = now;\n        var dt = this._elapsed / 1000;\n        this.processInput(dt);\n        this._textContext.clearRect(0, 0, this._textCanvas.width, this._textCanvas.height);\n        this._textContext.fillText(\"FPS: \" + this.getFps().toFixed(1), 10, 10);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._buffers.framebuffer);\n        this.drawScene(dt);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.bindTexture(gl.TEXTURE_2D, this._frameBufferTexture);\n        this.drawQuad();\n        requestAnimationFrame(this.updateFrame.bind(this));\n    };\n    Program.prototype.getFps = function () {\n        this._totalFPS += this._fps - (this._frameTimes[this._frameCursor] || 0);\n        this._frameTimes[this._frameCursor++] = this._fps;\n        this._numFrames = Math.max(this._numFrames, this._frameCursor);\n        this._frameCursor %= this._maxFrames;\n        return this._totalFPS / this._numFrames;\n    };\n    Program.prototype.end = function () {\n    };\n    Program.prototype.loadTexture = function (url) {\n        var gl = Renderer_1.Renderer.instance.gl;\n        var texture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([0, 0, 255, 255]));\n        var image = new Image();\n        image.onload = function () {\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.generateMipmap(gl.TEXTURE_2D);\n            gl.bindTexture(gl.TEXTURE_2D, null);\n        };\n        image.src = url;\n        return texture;\n    };\n    Program.prototype.isPowerOf2 = function (value) {\n        return (value & (value - 1)) === 0;\n    };\n    Program.prototype.createQuadbuffer = function () {\n        var gl = Renderer_1.Renderer.instance.gl;\n        var quadPositionBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, quadPositionBuffer);\n        var vertices = [\n            -1, -1, 0,\n            1, -1, 0,\n            1, 1, 0,\n            -1, -1, 0,\n            1, 1, 0,\n            -1, 1, 0\n        ];\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n        this._buffers.quadPositionBuffer = quadPositionBuffer;\n        var quadTextureCoordBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, quadTextureCoordBuffer);\n        var textureCoordinates = [\n            0.0, 0.0,\n            1.0, 0.0,\n            1.0, 1.0,\n            0.0, 0.0,\n            1.0, 1.0,\n            0.0, 1.0\n        ];\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoordinates), gl.STATIC_DRAW);\n        this._buffers.quadTextureCoordBuffer = quadTextureCoordBuffer;\n    };\n    Program.prototype.drawQuad = function () {\n        var gl = Renderer_1.Renderer.instance.gl;\n        gl.useProgram(this._shaders.quad.program);\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n        gl.clearColor(0, 0, 0, 0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        var positionLocation = gl.getAttribLocation(this._shaders.quad.program, 'a_position');\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._buffers.quadPositionBuffer);\n        gl.vertexAttribPointer(positionLocation, 3, gl.FLOAT, false, 0, 0);\n        gl.enableVertexAttribArray(positionLocation);\n        var textureLocation = gl.getAttribLocation(this._shaders.quad.program, 'a_textureCoord');\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._buffers.quadTextureCoordBuffer);\n        var num = 2;\n        var type = gl.FLOAT;\n        var normalize = false;\n        var stride = 0;\n        var offset = 0;\n        gl.vertexAttribPointer(textureLocation, num, type, normalize, stride, offset);\n        gl.enableVertexAttribArray(textureLocation);\n        var sampler = gl.getUniformLocation(this._shaders.quad.program, 'u_sampler');\n        gl.uniform1i(sampler, 0);\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n    };\n    Program.prototype.deleteFramebuffer = function () {\n        var gl = Renderer_1.Renderer.instance.gl;\n        if (this._buffers.framebuffer)\n            gl.deleteFramebuffer(this._buffers.framebuffer);\n        if (this._frameBufferTexture)\n            gl.deleteTexture(this._frameBufferTexture);\n        this._buffers.framebuffer = null;\n        this._frameBufferTexture = null;\n    };\n    Program.prototype.createFramebuffer = function (width, height) {\n        var gl = Renderer_1.Renderer.instance.gl;\n        this.deleteFramebuffer();\n        this._frameBufferTexture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, this._frameBufferTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        this._buffers.framebuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._buffers.framebuffer);\n        var attachmentPoint = gl.COLOR_ATTACHMENT0;\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, attachmentPoint, gl.TEXTURE_2D, this._frameBufferTexture, 0);\n        this._buffers.depthBuffer = gl.createRenderbuffer();\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this._buffers.depthBuffer);\n        gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, width, height);\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, this._buffers.depthBuffer);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    };\n    Program.prototype.drawScene = function (deltaTime) {\n        var gl = Renderer_1.Renderer.instance.gl;\n        var speed = 60 * deltaTime;\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n        gl.clearDepth(1);\n        gl.clearColor(0, 0, 0, 0);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.useProgram(this._shaders.phong.program);\n        this._cubeMesh.bind();\n        {\n            gl.activeTexture(gl.TEXTURE0);\n            gl.bindTexture(gl.TEXTURE_2D, this._texture);\n            var sampler = gl.getUniformLocation(this._shaders.phong.program, 'u_sampler');\n            gl.uniform1i(sampler, 0);\n        }\n        var modelMatrix = new Mat4_1.Mat4();\n        modelMatrix.translate(0, 0, -6);\n        modelMatrix.scale(0.5, 0.5, 0.5);\n        modelMatrix.rotateX((0, Util_1.degToRad)(this._cubeRotation));\n        modelMatrix.rotateY((0, Util_1.degToRad)(this._cubeRotation));\n        modelMatrix.rotateZ((0, Util_1.degToRad)(this._cubeRotation));\n        var fieldOfView = (0, Util_1.degToRad)(45);\n        var aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n        var zNear = 0.1;\n        var zFar = 100;\n        var projectionMatrixLocation = gl.getUniformLocation(this._shaders.phong.program, \"u_projectionMatrix\");\n        var modelMatrixLocation = gl.getUniformLocation(this._shaders.phong.program, \"u_modelMatrix\");\n        var viewMatrixLocation = gl.getUniformLocation(this._shaders.phong.program, \"u_viewMatrix\");\n        gl.uniformMatrix4fv(projectionMatrixLocation, false, Renderer_1.Renderer.instance.editorCamera.projectionMatrix.values);\n        gl.uniformMatrix4fv(viewMatrixLocation, false, Renderer_1.Renderer.instance.editorCamera.viewMatrix.values);\n        gl.uniformMatrix4fv(modelMatrixLocation, false, modelMatrix.values);\n        var primitiveType = gl.TRIANGLES;\n        var offset = 0;\n        var count = 36;\n        gl.drawElements(primitiveType, count, gl.UNSIGNED_SHORT, offset);\n        this._cubeMesh.unbind();\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        this._cubeRotation += speed;\n    };\n    return Program;\n}());\nexports.Program = Program;\n\n},{\"./ShaderSources\":3,\"./gameplay/Input\":5,\"./mathLib/Mat4\":7,\"./mathLib/Util\":8,\"./renderer/Camera\":10,\"./renderer/Mesh\":12,\"./renderer/Renderer\":13}],2:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShaderProgram = void 0;\nvar Renderer_1 = require(\"./renderer/Renderer\");\nvar ShaderProgram = (function () {\n    function ShaderProgram() {\n        this._uniforms = {};\n    }\n    Object.defineProperty(ShaderProgram.prototype, \"program\", {\n        get: function () {\n            return this._program;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ShaderProgram.prototype.initShaderProgram = function (gl, vertexShaderSource, fragmentShaderSource) {\n        var vertexShader = this.loadShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\n        var fragmentShader = this.loadShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\n        this._program = gl.createProgram();\n        gl.attachShader(this._program, vertexShader);\n        gl.attachShader(this._program, fragmentShader);\n        gl.linkProgram(this._program);\n        if (!gl.getProgramParameter(this._program, gl.LINK_STATUS)) {\n            alert(\"Unable to initialize the shader program: \".concat(gl.getProgramInfoLog(this._program)));\n        }\n    };\n    ShaderProgram.prototype.loadShader = function (gl, type, source) {\n        var shader = gl.createShader(type);\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n            alert(\"An error occurred compiling the shaders: \".concat(gl.getShaderInfoLog(shader)));\n            gl.deleteShader(shader);\n            return null;\n        }\n        return shader;\n    };\n    ShaderProgram.prototype.use = function () {\n        Renderer_1.Renderer.instance.gl.useProgram(this._program);\n    };\n    ShaderProgram.prototype.getUniformLocation = function (name) {\n        var gl = Renderer_1.Renderer.instance.gl;\n        if (!this._uniforms[name]) {\n            this._uniforms[name] = gl.getUniformLocation(this._program, name);\n        }\n        return this._uniforms[name];\n    };\n    ShaderProgram.prototype.setUniformMatrix4fv = function (name, value) {\n        var gl = Renderer_1.Renderer.instance.gl;\n        this.use();\n        var location = this.getUniformLocation(name);\n        gl.uniformMatrix4fv(location, false, value);\n        this._uniforms[name] = location;\n    };\n    ShaderProgram.prototype.setUniform1i = function (name, value) {\n        var gl = Renderer_1.Renderer.instance.gl;\n        var location = this.getUniformLocation(name);\n        gl.uniform1i(location, value);\n        this._uniforms[name] = location;\n    };\n    return ShaderProgram;\n}());\nexports.ShaderProgram = ShaderProgram;\n\n},{\"./renderer/Renderer\":13}],3:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fsFrameBufferSource = exports.vsFrameBufferSource = exports.fsPhongSource = exports.vsPhongSource = void 0;\nexports.vsPhongSource = \"#version 300 es\\n    in vec4 a_position;\\n    in vec3 a_normal;\\n    in vec2 a_textureCoord;\\n    uniform mat4 u_projectionMatrix;\\n    uniform mat4 u_modelMatrix;\\n    uniform mat4 u_viewMatrix;\\n\\n    out vec2 v_textureCoord;\\n\\n    void main() {\\n        gl_Position = u_projectionMatrix * u_viewMatrix * u_modelMatrix * a_position;\\n        v_textureCoord = a_textureCoord;\\n    }\\n\";\nexports.fsPhongSource = \"#version 300 es\\n    precision highp float;\\n    in vec2 v_textureCoord;\\n    uniform sampler2D u_sampler;\\n    out vec4 out_color;\\n\\n    void main()\\n    {\\n        highp vec4 color = texture(u_sampler, v_textureCoord);\\n        if (color.a == 0.0) { discard; }\\n        out_color = color;\\n    }\\n\";\nexports.vsFrameBufferSource = \"#version 300 es\\n    in vec4 a_position;\\n    in vec2 a_textureCoord;\\n\\n    out vec2 v_textureCoord;\\n\\n    void main() {\\n        gl_Position = a_position;\\n        v_textureCoord = a_textureCoord;\\n    }\\n\";\nexports.fsFrameBufferSource = \"#version 300 es\\n    precision highp float;\\n    in vec2 v_textureCoord;\\n    uniform sampler2D u_sampler;\\n    out vec4 out_color;\\n\\n    void main()\\n    {\\n        highp vec4 color = texture(u_sampler, v_textureCoord);\\n        out_color = vec4(color.r, color.g, color.b, color.a);\\n    }\\n\";\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Events = void 0;\nvar Events;\n(function (Events) {\n    var _events = {};\n    var Listener = (function () {\n        function Listener(event, callback) {\n            this._event = event;\n            this._callback = callback;\n        }\n        Listener.prototype.disconnect = function () {\n            remove(this._event, this._callback);\n        };\n        ;\n        Object.defineProperty(Listener.prototype, \"callback\", {\n            get: function () { return this._callback; },\n            enumerable: false,\n            configurable: true\n        });\n        return Listener;\n    }());\n    Events.Listener = Listener;\n    function add(event, callback) {\n        if (!_events[event]) {\n            _events[event] = [];\n        }\n        var listener = new Listener(event, callback);\n        _events[event].push(listener);\n        return listener;\n    }\n    Events.add = add;\n    function remove(event, callback) {\n        if (!_events[event]) {\n            return;\n        }\n        for (var i = 0; i < _events[event].length; i++) {\n            if (_events[event][i].callback === callback) {\n                _events[event].splice(i, 1);\n                return;\n            }\n        }\n    }\n    function dispatch(event) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (_events[event]) {\n            for (var _a = 0, _b = _events[event]; _a < _b.length; _a++) {\n                var listener = _b[_a];\n                listener.callback.apply(listener, args);\n            }\n        }\n    }\n    Events.dispatch = dispatch;\n})(Events = exports.Events || (exports.Events = {}));\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Input = exports.MouseButton = exports.Keycode = void 0;\nvar Renderer_1 = require(\"../renderer/Renderer\");\nvar Events_1 = require(\"./Events\");\nvar Keycode;\n(function (Keycode) {\n    Keycode[\"W\"] = \"KeyW\";\n    Keycode[\"A\"] = \"KeyA\";\n    Keycode[\"S\"] = \"KeyS\";\n    Keycode[\"D\"] = \"KeyD\";\n})(Keycode = exports.Keycode || (exports.Keycode = {}));\nvar MouseButton;\n(function (MouseButton) {\n    MouseButton[MouseButton[\"Left\"] = 0] = \"Left\";\n    MouseButton[MouseButton[\"Middle\"] = 1] = \"Middle\";\n    MouseButton[MouseButton[\"Right\"] = 2] = \"Right\";\n})(MouseButton = exports.MouseButton || (exports.MouseButton = {}));\nvar Input = (function () {\n    function Input() {\n    }\n    Object.defineProperty(Input, \"instance\", {\n        get: function () {\n            if (!Input._instance) {\n                Input._instance = new Input();\n                Input._instance.init();\n            }\n            return Input._instance;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Input.prototype.init = function () {\n        var _this = this;\n        this._keys = {};\n        this._mouse = {};\n        addEventListener(\"keydown\", function (e) {\n            _this._keys[e.code] = true;\n            Events_1.Events.dispatch(e.code, e);\n        });\n        addEventListener(\"keyup\", function (e) {\n            _this._keys[e.code] = false;\n        });\n        Renderer_1.Renderer.instance.canvas.addEventListener(\"mousemove\", function (e) {\n            e.preventDefault();\n            Events_1.Events.dispatch(\"mousemove\", e);\n        });\n        Renderer_1.Renderer.instance.canvas.addEventListener(\"mousedown\", function (e) {\n            e.preventDefault();\n            _this._mouse[e.button] = true;\n            Events_1.Events.dispatch(\"mouse\".concat(e.button), e);\n        });\n        Renderer_1.Renderer.instance.canvas.addEventListener(\"mouseup\", function (e) {\n            e.preventDefault();\n            _this._mouse[e.button] = false;\n        });\n        Renderer_1.Renderer.instance.canvas.oncontextmenu = function (e) {\n            e.preventDefault();\n        };\n    };\n    Object.defineProperty(Input.prototype, \"mouseDelta\", {\n        get: function () { return this._mouseDelta; },\n        enumerable: false,\n        configurable: true\n    });\n    Input.prototype.onKey = function (key, callback) {\n        return Events_1.Events.add(key, callback);\n    };\n    Input.prototype.onMouseClick = function (button, callback) {\n        return Events_1.Events.add(\"mouse\".concat(button), callback);\n    };\n    Input.prototype.onMouseMove = function (callback) {\n        return Events_1.Events.add(\"mousemove\", callback);\n    };\n    Input.prototype.isKeyDown = function (key) {\n        return this._keys[key];\n    };\n    Input.prototype.isMouseDown = function (button) {\n        return this._mouse[button];\n    };\n    Input._instance = null;\n    return Input;\n}());\nexports.Input = Input;\n\n},{\"../renderer/Renderer\":13,\"./Events\":4}],6:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Program_1 = require(\"./Program\");\nvar program = new Program_1.Program();\nprogram.init();\nprogram.update();\n\n},{\"./Program\":1}],7:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Mat4 = void 0;\nvar Mat4 = (function () {\n    function Mat4() {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            values[_i] = arguments[_i];\n        }\n        if (values.length === 1) {\n            this._values = [values[0], values[0], values[0], values[0], values[0], values[0], values[0], values[0], values[0], values[0], values[0], values[0], values[0], values[0], values[0], values[0]];\n        }\n        else if (values.length === 16) {\n            this._values = values;\n        }\n        else if (values.length === 0) {\n            this._values = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n        }\n        else {\n            throw new Error(\"Invalid number of values\");\n        }\n    }\n    Object.defineProperty(Mat4.prototype, \"values\", {\n        get: function () {\n            return this._values;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m00\", {\n        get: function () { return this._values[0]; },\n        set: function (value) { this._values[0] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m01\", {\n        get: function () { return this._values[1]; },\n        set: function (value) { this._values[1] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m02\", {\n        get: function () { return this._values[2]; },\n        set: function (value) { this._values[2] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m03\", {\n        get: function () { return this._values[3]; },\n        set: function (value) { this._values[3] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m10\", {\n        get: function () { return this._values[4]; },\n        set: function (value) { this._values[4] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m11\", {\n        get: function () { return this._values[5]; },\n        set: function (value) { this._values[5] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m12\", {\n        get: function () { return this._values[6]; },\n        set: function (value) { this._values[6] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m13\", {\n        get: function () { return this._values[7]; },\n        set: function (value) { this._values[7] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m20\", {\n        get: function () { return this._values[8]; },\n        set: function (value) { this._values[8] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m21\", {\n        get: function () { return this._values[9]; },\n        set: function (value) { this._values[9] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m22\", {\n        get: function () { return this._values[10]; },\n        set: function (value) { this._values[10] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m23\", {\n        get: function () { return this._values[11]; },\n        set: function (value) { this._values[11] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m30\", {\n        get: function () { return this._values[12]; },\n        set: function (value) { this._values[12] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m31\", {\n        get: function () { return this._values[13]; },\n        set: function (value) { this._values[13] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m32\", {\n        get: function () { return this._values[14]; },\n        set: function (value) { this._values[14] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mat4.prototype, \"m33\", {\n        get: function () { return this._values[15]; },\n        set: function (value) { this._values[15] = value; },\n        enumerable: false,\n        configurable: true\n    });\n    Mat4.prototype.multiply = function (other) {\n        var m00 = other.m00 * this.m00 + other.m01 * this.m10 + other.m02 * this.m20 + other.m03 * this.m30;\n        var m01 = other.m00 * this.m01 + other.m01 * this.m11 + other.m02 * this.m21 + other.m03 * this.m31;\n        var m02 = other.m00 * this.m02 + other.m01 * this.m12 + other.m02 * this.m22 + other.m03 * this.m32;\n        var m03 = other.m00 * this.m03 + other.m01 * this.m13 + other.m02 * this.m23 + other.m03 * this.m33;\n        var m10 = other.m10 * this.m00 + other.m11 * this.m10 + other.m12 * this.m20 + other.m13 * this.m30;\n        var m11 = other.m10 * this.m01 + other.m11 * this.m11 + other.m12 * this.m21 + other.m13 * this.m31;\n        var m12 = other.m10 * this.m02 + other.m11 * this.m12 + other.m12 * this.m22 + other.m13 * this.m32;\n        var m13 = other.m10 * this.m03 + other.m11 * this.m13 + other.m12 * this.m23 + other.m13 * this.m33;\n        var m20 = other.m20 * this.m00 + other.m21 * this.m10 + other.m22 * this.m20 + other.m23 * this.m30;\n        var m21 = other.m20 * this.m01 + other.m21 * this.m11 + other.m22 * this.m21 + other.m23 * this.m31;\n        var m22 = other.m20 * this.m02 + other.m21 * this.m12 + other.m22 * this.m22 + other.m23 * this.m32;\n        var m23 = other.m20 * this.m03 + other.m21 * this.m13 + other.m22 * this.m23 + other.m23 * this.m33;\n        var m30 = other.m30 * this.m00 + other.m31 * this.m10 + other.m32 * this.m20 + other.m33 * this.m30;\n        var m31 = other.m30 * this.m01 + other.m31 * this.m11 + other.m32 * this.m21 + other.m33 * this.m31;\n        var m32 = other.m30 * this.m02 + other.m31 * this.m12 + other.m32 * this.m22 + other.m33 * this.m32;\n        var m33 = other.m30 * this.m03 + other.m31 * this.m13 + other.m32 * this.m23 + other.m33 * this.m33;\n        this._values[0] = m00;\n        this._values[1] = m01;\n        this._values[2] = m02;\n        this._values[3] = m03;\n        this._values[4] = m10;\n        this._values[5] = m11;\n        this._values[6] = m12;\n        this._values[7] = m13;\n        this._values[8] = m20;\n        this._values[9] = m21;\n        this._values[10] = m22;\n        this._values[11] = m23;\n        this._values[12] = m30;\n        this._values[13] = m31;\n        this._values[14] = m32;\n        this._values[15] = m33;\n        return this;\n    };\n    Mat4.prototype.equals = function (other, tolerance) {\n        if (tolerance === void 0) { tolerance = 0.00001; }\n        for (var i = 0; i < 9; i++) {\n            if (Math.abs(this._values[i] - other._values[i]) > tolerance) {\n                return false;\n            }\n        }\n        return true;\n    };\n    Mat4.translation = function (x, y, z) {\n        return new Mat4(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, y, z, 1);\n    };\n    Mat4.prototype.translate = function (x, y, z) {\n        var translationMatrix = Mat4.translation(x, y, z);\n        return this.multiply(translationMatrix);\n    };\n    Mat4.xRotation = function (angle) {\n        var c = Math.cos(angle);\n        var s = Math.sin(angle);\n        return new Mat4(1, 0, 0, 0, 0, c, s, 0, 0, -s, c, 0, 0, 0, 0, 1);\n    };\n    Mat4.prototype.rotateX = function (angle) {\n        var rotationMatrix = Mat4.xRotation(angle);\n        return this.multiply(rotationMatrix);\n    };\n    Mat4.yRotation = function (angle) {\n        var c = Math.cos(angle);\n        var s = Math.sin(angle);\n        return new Mat4(c, 0, -s, 0, 0, 1, 0, 0, s, 0, c, 0, 0, 0, 0, 1);\n    };\n    Mat4.prototype.rotateY = function (angle) {\n        var rotationMatrix = Mat4.yRotation(angle);\n        return this.multiply(rotationMatrix);\n    };\n    Mat4.zRotation = function (angle) {\n        var c = Math.cos(angle);\n        var s = Math.sin(angle);\n        return new Mat4(c, s, 0, 0, -s, c, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    };\n    Mat4.prototype.rotateZ = function (angle) {\n        var rotationMatrix = Mat4.zRotation(angle);\n        return this.multiply(rotationMatrix);\n    };\n    Mat4.scaling = function (x, y, z) {\n        return new Mat4(x, 0, 0, 0, 0, y, 0, 0, 0, 0, z, 0, 0, 0, 0, 1);\n    };\n    Mat4.prototype.scale = function (x, y, z) {\n        var scaleMatrix = Mat4.scaling(x, y, z);\n        return this.multiply(scaleMatrix);\n    };\n    Mat4.orthographic = function (left, right, bottom, top, near, far) {\n        var rl = right - left;\n        var tb = top - bottom;\n        var fn = far - near;\n        return new Mat4(2 / rl, 0, 0, 0, 0, 2 / tb, 0, 0, 0, 0, -2 / fn, 0, -(right + left) / rl, -(top + bottom) / tb, -(far + near) / fn, 1);\n    };\n    Mat4.perspective = function (fov, aspect, near, far) {\n        var f = 1.0 / Math.tan(fov / 2);\n        var nf = 1 / (near - far);\n        return new Mat4(f / aspect, 0, 0, 0, 0, f, 0, 0, 0, 0, (far + near) * nf, -1, 0, 0, (2 * far * near) * nf, 0);\n    };\n    Mat4.lookAt = function (position, target, up) {\n        var z = position.subtract(target).normalize();\n        var x = up.cross(z).normalize();\n        var y = z.cross(x).normalize();\n        return new Mat4(x.x, y.x, z.x, 0, x.y, y.y, z.y, 0, x.z, y.z, z.z, 0, -x.dot(position), -y.dot(position), -z.dot(position), 1);\n    };\n    return Mat4;\n}());\nexports.Mat4 = Mat4;\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.degToRad = exports.radToDeg = void 0;\nfunction radToDeg(rad) {\n    return rad * 180 / Math.PI;\n}\nexports.radToDeg = radToDeg;\nfunction degToRad(deg) {\n    return deg * Math.PI / 180;\n}\nexports.degToRad = degToRad;\n\n},{}],9:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Vec3 = void 0;\nvar Vec3 = (function () {\n    function Vec3() {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            values[_i] = arguments[_i];\n        }\n        if (values.length === 1) {\n            this._values = [values[0], values[0], values[0]];\n        }\n        else if (values.length === 3) {\n            this._values = values;\n        }\n        else if (values.length === 0) {\n            this._values = [0, 0, 0];\n        }\n        else {\n            throw new Error(\"Invalid number of values\");\n        }\n    }\n    Object.defineProperty(Vec3.prototype, \"x\", {\n        get: function () {\n            return this._values[0];\n        },\n        set: function (value) {\n            this._values[0] = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Vec3.prototype, \"y\", {\n        get: function () {\n            return this._values[1];\n        },\n        set: function (value) {\n            this._values[1] = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Vec3.prototype, \"z\", {\n        get: function () {\n            return this._values[2];\n        },\n        set: function (value) {\n            this._values[2] = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Vec3.prototype, \"values\", {\n        get: function () {\n            return this._values;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Vec3.prototype.add = function (other) {\n        return new Vec3(this.x + other.x, this.y + other.y, this.z + other.z);\n    };\n    Vec3.prototype.subtract = function (other) {\n        return new Vec3(this.x - other.x, this.y - other.y, this.z - other.z);\n    };\n    Vec3.prototype.multiply = function (other) {\n        if (typeof other === \"number\") {\n            return new Vec3(this.x * other, this.y * other, this.z * other);\n        }\n        else {\n            return new Vec3(this.x * other.x, this.y * other.y, this.z * other.z);\n        }\n    };\n    Vec3.prototype.dot = function (other) {\n        return this.x * other.x + this.y * other.y + this.z * other.z;\n    };\n    Vec3.prototype.cross = function (other) {\n        return new Vec3(this.y * other.z - this.z * other.y, this.z * other.x - this.x * other.z, this.x * other.y - this.y * other.x);\n    };\n    Object.defineProperty(Vec3.prototype, \"length\", {\n        get: function () {\n            return Math.sqrt(this.dot(this));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Vec3.prototype.normalize = function () {\n        var length = this.length;\n        return new Vec3(this.x / length, this.y / length, this.z / length);\n    };\n    return Vec3;\n}());\nexports.Vec3 = Vec3;\n\n},{}],10:[function(require,module,exports){\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EditorPerspectiveCamera = exports.Camera = exports.CameraMovement = void 0;\nvar Input_1 = require(\"../gameplay/Input\");\nvar Mat4_1 = require(\"../mathLib/Mat4\");\nvar Util_1 = require(\"../mathLib/Util\");\nvar Vec3_1 = require(\"../mathLib/Vec3\");\nvar Renderer_1 = require(\"./Renderer\");\nvar YAW = -90.0;\nvar PITCH = 0.0;\nvar SPEED = 2.5;\nvar SENSITIVITY = 0.1;\nvar ZOOM = 45.0;\nvar NEAR = 0.1;\nvar FAR = 1000.0;\nvar FOV = 60;\nvar CameraMovement;\n(function (CameraMovement) {\n    CameraMovement[CameraMovement[\"FORWARD\"] = 0] = \"FORWARD\";\n    CameraMovement[CameraMovement[\"BACKWARD\"] = 1] = \"BACKWARD\";\n    CameraMovement[CameraMovement[\"LEFT\"] = 2] = \"LEFT\";\n    CameraMovement[CameraMovement[\"RIGHT\"] = 3] = \"RIGHT\";\n})(CameraMovement = exports.CameraMovement || (exports.CameraMovement = {}));\nvar Camera = (function () {\n    function Camera() {\n    }\n    return Camera;\n}());\nexports.Camera = Camera;\nvar EditorPerspectiveCamera = (function (_super) {\n    __extends(EditorPerspectiveCamera, _super);\n    function EditorPerspectiveCamera(position, up, yaw, pitch, front, fov, near, far, movementSpeed, mouseSensitivity, zoom) {\n        if (position === void 0) { position = new Vec3_1.Vec3(0, 0, 0); }\n        if (up === void 0) { up = new Vec3_1.Vec3(0, 1, 0); }\n        if (yaw === void 0) { yaw = YAW; }\n        if (pitch === void 0) { pitch = PITCH; }\n        if (front === void 0) { front = new Vec3_1.Vec3(0, 0, -1); }\n        if (fov === void 0) { fov = FOV; }\n        if (near === void 0) { near = NEAR; }\n        if (far === void 0) { far = FAR; }\n        if (movementSpeed === void 0) { movementSpeed = SPEED; }\n        if (mouseSensitivity === void 0) { mouseSensitivity = SENSITIVITY; }\n        if (zoom === void 0) { zoom = ZOOM; }\n        var _this = _super.call(this) || this;\n        _this._position = position;\n        _this._front = front;\n        _this._worldUp = up;\n        _this._yaw = yaw;\n        _this._pitch = pitch;\n        _this._fov = fov;\n        _this._near = near;\n        _this._far = far;\n        _this._movementSpeed = movementSpeed;\n        _this._mouseSensitivity = mouseSensitivity;\n        _this._zoom = zoom;\n        _this.updateVectors();\n        _this._moveDir = new Vec3_1.Vec3(0, 0, 0);\n        Input_1.Input.instance.onMouseMove(function (e) {\n            if (Input_1.Input.instance.isMouseDown(Input_1.MouseButton.Right)) {\n                var xDelta = e.movementX;\n                var yDelta = -e.movementY;\n                _this.processMouseMovement(xDelta, yDelta);\n            }\n        });\n        return _this;\n    }\n    Object.defineProperty(EditorPerspectiveCamera.prototype, \"viewMatrix\", {\n        get: function () {\n            return Mat4_1.Mat4.lookAt(this._position, this._position.add(this._front), this._up);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EditorPerspectiveCamera.prototype, \"projectionMatrix\", {\n        get: function () {\n            var gl = Renderer_1.Renderer.instance.gl;\n            var aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n            return Mat4_1.Mat4.perspective((0, Util_1.degToRad)(this._fov), aspect, this._near, this._far);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EditorPerspectiveCamera.prototype.updateVectors = function () {\n        var front = new Vec3_1.Vec3();\n        front.x = Math.cos((0, Util_1.degToRad)(this._yaw)) * Math.cos((0, Util_1.degToRad)(this._pitch));\n        front.y = Math.sin((0, Util_1.degToRad)(this._pitch));\n        front.z = Math.sin((0, Util_1.degToRad)(this._yaw)) * Math.cos((0, Util_1.degToRad)(this._pitch));\n        this._front = front.normalize();\n        this._right = this._front.cross(this._worldUp).normalize();\n        this._up = this._right.cross(this._front).normalize();\n    };\n    EditorPerspectiveCamera.prototype.processKeyboard = function (dir, dt) {\n        var velocity = this._movementSpeed * dt;\n        if (dir === CameraMovement.FORWARD) {\n            this._position = this._position.add(this._front.multiply(velocity));\n        }\n        if (dir === CameraMovement.BACKWARD) {\n            this._position = this._position.subtract(this._front.multiply(velocity));\n        }\n        if (dir === CameraMovement.LEFT) {\n            this._position = this._position.subtract(this._right.multiply(velocity));\n        }\n        if (dir === CameraMovement.RIGHT) {\n            this._position = this._position.add(this._right.multiply(velocity));\n        }\n    };\n    EditorPerspectiveCamera.prototype.processMouseMovement = function (xoffset, yoffset, constrainPitch) {\n        if (constrainPitch === void 0) { constrainPitch = true; }\n        xoffset *= this._mouseSensitivity;\n        yoffset *= this._mouseSensitivity;\n        this._yaw += xoffset;\n        this._pitch += yoffset;\n        if (constrainPitch) {\n            if (this._pitch > 89.0)\n                this._pitch = 89.0;\n            if (this._pitch < -89.0)\n                this._pitch = -89.0;\n        }\n        this.updateVectors();\n    };\n    return EditorPerspectiveCamera;\n}(Camera));\nexports.EditorPerspectiveCamera = EditorPerspectiveCamera;\n\n},{\"../gameplay/Input\":5,\"../mathLib/Mat4\":7,\"../mathLib/Util\":8,\"../mathLib/Vec3\":9,\"./Renderer\":13}],11:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Material = void 0;\nvar Material = (function () {\n    function Material(program, textures) {\n        if (textures === void 0) { textures = []; }\n        this._program = program;\n        this._textures = textures;\n    }\n    Object.defineProperty(Material.prototype, \"program\", {\n        get: function () { return this._program; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Material.prototype, \"textures\", {\n        get: function () { return this._textures; },\n        enumerable: false,\n        configurable: true\n    });\n    Material.prototype.bind = function () {\n        for (var i = 0; i < this._textures.length; i++) {\n            this._program.setUniform1i(this._textures[i].name, i);\n        }\n    };\n    return Material;\n}());\nexports.Material = Material;\n\n},{}],12:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Mesh = void 0;\nrequire(\"../mathLib/Mat4\");\nrequire(\"./Material\");\nvar Renderer_1 = require(\"./Renderer\");\nvar Mesh = (function () {\n    function Mesh(meshDatas, indices) {\n        this.indices = indices;\n        this.vao = this.createVao();\n        this.bind();\n        this.ibo = this.createIbo(this.indices);\n        this.vbo = this.createVbo(meshDatas);\n        this.unbind();\n    }\n    Mesh.prototype.createVao = function () {\n        var gl = Renderer_1.Renderer.instance.gl;\n        var vao = gl.createVertexArray();\n        return vao;\n    };\n    Mesh.prototype.createVbo = function (meshDatas) {\n        var vertexSize = 4;\n        var normalSize = 3;\n        var texCoordSize = 2;\n        var dataSize = vertexSize + normalSize + texCoordSize;\n        dataSize *= Float32Array.BYTES_PER_ELEMENT;\n        var dv = new DataView(new ArrayBuffer(dataSize * meshDatas.length));\n        var offset = 0;\n        for (var i = 0; i < meshDatas.length; i++) {\n            var meshData = meshDatas[i];\n            for (var i_1 = 0; i_1 < meshData.vertices.length; i_1++) {\n                dv.setFloat32(offset, meshData.vertices[i_1], true);\n                offset += Float32Array.BYTES_PER_ELEMENT;\n            }\n            for (var i_2 = 0; i_2 < meshData.normals.length; i_2++) {\n                dv.setFloat32(offset, meshData.normals[i_2], true);\n                offset += Float32Array.BYTES_PER_ELEMENT;\n            }\n            for (var i_3 = 0; i_3 < meshData.texCoords.length; i_3++) {\n                dv.setFloat32(offset, meshData.texCoords[i_3], true);\n                offset += Float32Array.BYTES_PER_ELEMENT;\n            }\n        }\n        var gl = Renderer_1.Renderer.instance.gl;\n        var vbo = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n        gl.bufferData(gl.ARRAY_BUFFER, dv, gl.STATIC_DRAW);\n        gl.vertexAttribPointer(0, vertexSize, gl.FLOAT, false, dataSize, 0);\n        gl.vertexAttribPointer(1, normalSize, gl.FLOAT, false, dataSize, vertexSize * Float32Array.BYTES_PER_ELEMENT);\n        gl.vertexAttribPointer(2, texCoordSize, gl.FLOAT, false, dataSize, (vertexSize + normalSize) * Float32Array.BYTES_PER_ELEMENT);\n        gl.enableVertexAttribArray(0);\n        gl.enableVertexAttribArray(1);\n        gl.enableVertexAttribArray(2);\n        return vbo;\n    };\n    Mesh.prototype.createIbo = function (data) {\n        var gl = Renderer_1.Renderer.instance.gl;\n        var ibo = gl.createBuffer();\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(data), gl.STATIC_DRAW);\n        return ibo;\n    };\n    ;\n    Mesh.prototype.bind = function () {\n        var gl = Renderer_1.Renderer.instance.gl;\n        gl.bindVertexArray(this.vao);\n    };\n    Mesh.prototype.unbind = function () {\n        var gl = Renderer_1.Renderer.instance.gl;\n        gl.bindVertexArray(null);\n    };\n    return Mesh;\n}());\nexports.Mesh = Mesh;\n\n},{\"../mathLib/Mat4\":7,\"./Material\":11,\"./Renderer\":13}],13:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Renderer = void 0;\nvar ShaderProgram_1 = require(\"../ShaderProgram\");\nvar Camera_1 = require(\"./Camera\");\nvar Renderer = (function () {\n    function Renderer() {\n    }\n    Object.defineProperty(Renderer, \"instance\", {\n        get: function () {\n            if (!Renderer._instance) {\n                Renderer._instance = new Renderer();\n                Renderer._instance.init();\n            }\n            return Renderer._instance;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Renderer.prototype.init = function () {\n        this._canvas = document.getElementById(\"canvas\");\n        this._gl = this._canvas.getContext(\"webgl2\", {\n            premultipliedAlpha: false\n        });\n        if (!this._gl) {\n            alert(\"unable to initialise webgl\");\n        }\n        this._shaders = {};\n        this._editorCamera = new Camera_1.EditorPerspectiveCamera();\n        this._canvas.width = window.innerWidth;\n        this._canvas.height = window.innerHeight;\n    };\n    Renderer.prototype.loadShader = function (shaderName, vertexShaderSource, fragmentShaderSource) {\n        if (!this._shaders[shaderName]) {\n            this._shaders[shaderName] = new ShaderProgram_1.ShaderProgram();\n            this._shaders[shaderName].initShaderProgram(this._gl, vertexShaderSource, fragmentShaderSource);\n        }\n        return this._shaders[shaderName];\n    };\n    Object.defineProperty(Renderer.prototype, \"gl\", {\n        get: function () { return this._gl; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Renderer.prototype, \"canvas\", {\n        get: function () { return this._canvas; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Renderer.prototype, \"shaders\", {\n        get: function () { return this._shaders; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Renderer.prototype, \"editorCamera\", {\n        get: function () { return this._editorCamera; },\n        enumerable: false,\n        configurable: true\n    });\n    Renderer._instance = null;\n    return Renderer;\n}());\nexports.Renderer = Renderer;\n\n},{\"../ShaderProgram\":2,\"./Camera\":10}]},{},[6])"],"file":"bundle.js"}